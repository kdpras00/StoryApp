/*! For license information please see main~bef837c7.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,e={358:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function h(e,r,n,a){var i=r&&r.prototype instanceof f?r:f,o=Object.create(i.prototype);return l(o,"_invoke",function(e,r,n){var a=1;return function(i,o){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=S(s,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===a)throw a=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=3;var u=p(e,r,n);if("normal"===u.type){if(a=n.done?4:2,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=4,n.method="throw",n.arg=u.arg)}}}(e,n,new M(a||[])),!0),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d={};function f(){}function m(){}function v(){}var g={};l(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(T([])));b&&b!==r&&i.call(b,s)&&(g=b);var k=v.prototype=f.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(a,o,s,c){var u=p(t[a],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==n(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var a;l(this,"_invoke",(function(t,n){function i(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(i,i):i()}),!0)}function S(e,r){var n=r.method,a=e.i[n];if(a===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=p(a,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var o=i.arg;return o?o.done?(r[e.r]=o.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function E(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function M(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function T(e){if(null!=e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(i.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(n(e)+" is not iterable")}return m.prototype=v,l(k,"constructor",v),l(v,"constructor",m),m.displayName=l(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},w(L.prototype),l(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new L(h(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(k),l(k,u,"Generator"),l(k,s,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){o.type="throw",o.arg=e,r.next=t}for(var a=r.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=t,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var a=n;break}}a&&("break"===t||"continue"===t)&&a[0]<=e&&e<=a[2]&&(a=null);var i=a?a[4]:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a[2],d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:T(e),r,n},"next"===this.method&&(this.arg=t),d}},e}function i(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function s(t){i(o,n,a,s,c,"next",t)}function c(t){i(o,n,a,s,c,"throw",t)}s(void 0)}))}}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}r.d(e,{A:()=>u});const u=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storyList=document.getElementById("story-list"),this.storyForm=document.getElementById("story-form"),this.loginForm=document.getElementById("login-form"),this.registerForm=document.getElementById("register-form"),this.camera=document.getElementById("camera"),this.canvas=document.getElementById("canvas"),this.captureBtn=document.getElementById("capture"),this.mapContainer=document.getElementById("map"),this.storyMapContainer=document.getElementById("story-map"),this.pages=document.querySelectorAll(".page"),this.photoInput=document.getElementById("photo"),this.photoPreview=document.getElementById("preview"),this.navList=document.getElementById("nav-list"),this.navLinks=document.querySelectorAll("nav a"),this.authContainer=document.getElementById("auth-container"),this.appHeader=document.getElementById("app-header"),this.loginSection=document.getElementById("login"),this.registerSection=document.getElementById("register"),this.map=null,this.storyMap=null,this.currentMarker=null,this.storyMarkers=[],this.stream=null,this.capturedImageData=null,this.onRegisterSubmit=null,this.onLoginSubmit=null,this.onStorySubmit=null,this.onCaptureClick=null,this.onNavLinkClick=null,this.onMapClick=null,this.onFavoriteClick=null,this._initializeEventListeners(),this._setupImageErrorHandling(),this._setupAuthLinks()},e=[{key:"_initializeEventListeners",value:function(){this._setupSkipToContent(),this._setupPhotoInput(),this._setupFormEventListeners(),this._setupNavigationEventListeners(),this._setupPasswordToggle()}},{key:"_setupSkipToContent",value:function(){var t=document.querySelector("#main-content"),e=document.querySelector(".skip-to-content");e&&t&&e.addEventListener("click",(function(r){r.preventDefault(),e.blur(),t.focus(),t.scrollIntoView()}))}},{key:"_setupPhotoInput",value:function(){var t=this;this.photoInput.addEventListener("change",(function(e){var r=e.target.files[0];if(r&&r.type.startsWith("image/")){if(r.size>1048576)return t.showMessage("Ukuran foto terlalu besar. Maksimal 1MB.",!0),void(t.photoInput.value="");t._previewImageFile(r)}else t.showMessage("Harap pilih file gambar yang valid.",!0),t.photoInput.value=""}))}},{key:"_previewImageFile",value:function(t){var e=this,r=new FileReader;r.onload=function(t){e.photoPreview.src=t.target.result,e.photoPreview.classList.remove("hidden"),e.capturedImageData=null},r.readAsDataURL(t)}},{key:"_setupFormEventListeners",value:function(){var t=this;this.registerForm.addEventListener("submit",(function(e){if(e.preventDefault(),t.onRegisterSubmit){var r=new FormData(e.target),n={name:r.get("name"),email:r.get("email"),password:r.get("password")},a=e.target.querySelector('button[type="submit"]');t._setButtonLoading(a,!0),t.onRegisterSubmit(n).catch((function(t){return console.error("Register error:",t)})).finally((function(){t._setButtonLoading(a,!1)}))}})),this.loginForm.addEventListener("submit",(function(e){if(e.preventDefault(),t.onLoginSubmit){var r=new FormData(e.target),n={email:r.get("email"),password:r.get("password")},a=e.target.querySelector('button[type="submit"]');t._setButtonLoading(a,!0),t.onLoginSubmit(n).catch((function(t){return console.error("Login error:",t)})).finally((function(){t._setButtonLoading(a,!1)}))}})),this.storyForm.addEventListener("submit",(function(e){if(e.preventDefault(),t.onStorySubmit){var r={description:e.target.description.value.trim(),photoFile:t.getPhotoFromInput(),imageData:t.capturedImageData},n=e.target.querySelector('button[type="submit"]');t._setButtonLoading(n,!0),t.onStorySubmit(r).finally((function(){t._setButtonLoading(n,!1)}))}})),this.captureBtn.addEventListener("click",(function(){t.onCaptureClick&&t.onCaptureClick()}))}},{key:"_setupNavigationEventListeners",value:function(){var t=this;this.navLinks.forEach((function(e){e.addEventListener("click",(function(r){if(t.onNavLinkClick){var n=e.getAttribute("href").substring(1);t.onNavLinkClick(r,n)}}))}))}},{key:"_setupPasswordToggle",value:function(){document.querySelectorAll(".toggle-password").forEach((function(t){t.addEventListener("click",(function(){var e=t.getAttribute("data-target"),r=document.getElementById(e),n=t.querySelector("i");"password"===r.type?(r.type="text",n.classList.remove("fa-eye"),n.classList.add("fa-eye-slash"),t.setAttribute("aria-label","Sembunyikan password")):(r.type="password",n.classList.remove("fa-eye-slash"),n.classList.add("fa-eye"),t.setAttribute("aria-label","Tampilkan password"))}))}))}},{key:"_setupAuthLinks",value:function(){var t=this;document.querySelectorAll(".auth-switch a").forEach((function(e){e.addEventListener("click",(function(r){r.preventDefault();var n=e.getAttribute("href").substring(1);t.showAuthSection(n),window.location.hash=n}))}))}},{key:"showAuthSection",value:function(t){this.loginSection.classList.add("hidden"),this.registerSection.classList.add("hidden"),"login"===t?this.loginSection.classList.remove("hidden"):"register"===t&&this.registerSection.classList.remove("hidden")}},{key:"updateNav",value:function(t){t?(this.appHeader.classList.remove("hidden"),this.authContainer.classList.add("hidden"),this.showPage("home")):(this.appHeader.classList.add("hidden"),this.authContainer.classList.remove("hidden"),"register"===(window.location.hash.slice(1)||"login")?this.showAuthSection("register"):this.showAuthSection("login"),this.pages.forEach((function(t){t.classList.add("hidden")})))}},{key:"displayStories",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.storyList.innerHTML="",this.clearStoryMapMarkers(),t.forEach((function(t){var n=document.createElement("div");n.className="story-card",n.setAttribute("role","listitem");var a=r.some((function(e){return e.id===t.id})),i="Lokasi tidak tersedia";if(t.lat&&t.lon){var o=parseFloat(t.lat).toFixed(4),s=parseFloat(t.lon).toFixed(4);i="".concat(o,", ").concat(s)}n.innerHTML='\n        <div class="img-container">\n          <img src="'.concat(t.photoUrl,'" alt="Foto cerita ').concat(t.name,'" loading="lazy">\n        </div>\n        <h3>').concat(t.name,"</h3>\n        <p>").concat(t.description,'</p>\n        <div class="location-display">\n          <i class="fas fa-map-marker-alt"></i> ').concat(i,"\n        </div>\n        <p>Dibuat: ").concat(new Date(t.createdAt).toLocaleDateString("id-ID"),'</p>\n        <button class="favorite-btn ').concat(a?"favorited":"",'"\n                 data-story-id="').concat(t.id,'"\n                 data-processing="false"\n                 data-favorited="').concat(a,'"\n                 aria-label="').concat(a?"Hapus dari favorit":"Tambah ke favorit",'">\n          <i class="fas fa-heart"></i>\n          <span class="favorite-text">').concat(a?"Hapus dari Favorit":"Tambah ke Favorit","</span>\n        </button>\n      "),e.storyList.appendChild(n);var c=n.querySelector(".favorite-btn");c.addEventListener("click",(function(){if("true"!==c.getAttribute("data-processing")&&e.onFavoriteClick){var r="true"===c.getAttribute("data-favorited");c.setAttribute("data-processing","true"),e._setButtonLoading(c,!0),e.onFavoriteClick(t,!r).finally((function(){c.setAttribute("data-processing","false"),e._setButtonLoading(c,!1)}))}})),t.lat&&t.lon&&e.addStoryMarker(t);var u=n.querySelector("img");u.complete&&0===u.naturalHeight&&e._handleImageError(u)}))}},{key:"updateFavoriteButton",value:function(t,e){var r=document.querySelector('.favorite-btn[data-story-id="'.concat(t,'"]'));if(r){if(r.setAttribute("data-favorited",e),e){r.classList.add("favorited");var n=r.querySelector(".favorite-text");n?n.textContent="Hapus dari Favorit":r.innerHTML='<i class="fas fa-heart"></i> <span class="favorite-text">Hapus dari Favorit</span>',r.setAttribute("aria-label","Hapus dari favorit")}else{r.classList.remove("favorited");var a=r.querySelector(".favorite-text");a?a.textContent="Tambah ke Favorit":r.innerHTML='<i class="fas fa-heart"></i> <span class="favorite-text">Tambah ke Favorit</span>',r.setAttribute("aria-label","Tambah ke favorit")}r.setAttribute("data-processing","false")}}},{key:"displayFavoriteStories",value:function(t){this.storyList.innerHTML="",this.clearStoryMapMarkers(),0!==t.length?this.displayStories(t,t):this.storyList.innerHTML='\n        <div class="empty-state">\n          <i class="fas fa-heart-broken fa-3x"></i>\n          <h3>Belum Ada Cerita Favorit</h3>\n          <p>Tambahkan cerita ke favorit dari halaman beranda.</p>\n        </div>\n      '}},{key:"setupCamera",value:(r=o(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:return e=t.sent,this.camera.srcObject=e,this.stream=e,t.abrupt("return",e);case 9:throw t.prev=9,t.t0=t.catch(0),new Error("Tidak dapat mengakses kamera: "+t.t0.message);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(){return r.apply(this,arguments)})},{key:"stopCamera",value:function(){this.stream&&(this.stream.getTracks().forEach((function(t){return t.stop()})),this.stream=null,this.camera.srcObject=null)}},{key:"captureImage",value:function(){if(!this.stream)return null;var t=this.canvas.getContext("2d");return this.canvas.width=this.camera.videoWidth,this.canvas.height=this.camera.videoHeight,t.drawImage(this.camera,0,0),this.capturedImageData=this.canvas.toDataURL("image/jpeg"),this.capturedImageData}},{key:"showImagePreview",value:function(t){this.photoPreview.src=t,this.photoPreview.classList.remove("hidden"),this.photoInput.value=""}},{key:"setupMap",value:function(){var t=this;if(this.map)return this.map;this.mapContainer.setAttribute("aria-label","Peta interaktif untuk memilih lokasi cerita"),this.map=L.map(this.mapContainer).setView([-6.185931,106.552764],17);var e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}),r=L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:"© CartoDB"}),n=L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}),a=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri"}),i=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors"});n.addTo(this.map);var o={"Dark Theme":n,OpenStreetMap:e,"Light Theme":r,Satellite:a,Topographic:i};return L.control.layers(o).addTo(this.map),this.map.on("click",(function(e){t.onMapClick&&t.onMapClick(e.latlng)})),this.map}},{key:"setupStoryMap",value:function(){if(this.storyMap)return this.storyMap;this.storyMap=L.map(this.storyMapContainer,{center:[-2.5489,118.0149],zoom:4,scrollWheelZoom:!0,zoomControl:!0});var t=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}),e=L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}),r=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19}),n=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors",maxZoom:19}),a=L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20});e.addTo(this.storyMap);var i={"Dark Theme":e,OpenStreetMap:t,"Light Theme":a,Satellite:r,Topographic:n};return L.control.layers(i).addTo(this.storyMap),L.control.fullscreen&&L.control.fullscreen({position:"topleft",title:"Tampilkan peta penuh",titleCancel:"Keluar dari mode penuh",forceSeparateButton:!0}).addTo(this.storyMap),L.control.locate&&L.control.locate({position:"topleft",strings:{title:"Tunjukkan lokasi saya"},locateOptions:{enableHighAccuracy:!0}}).addTo(this.storyMap),this.markerClusterGroup=L.markerClusterGroup(),this.storyMap.addLayer(this.markerClusterGroup),this.storyMap}},{key:"updateMapMarker",value:function(t){this.map&&(this.currentMarker&&this.map.removeLayer(this.currentMarker),this.currentMarker=L.marker([t.lat,t.lng]).addTo(this.map),this.currentMarker.bindPopup("Lokasi Cerita").openPopup())}},{key:"clearMapMarkers",value:function(){this.map&&this.currentMarker&&(this.map.removeLayer(this.currentMarker),this.currentMarker=null)}},{key:"clearStoryMapMarkers",value:function(){var t=this;this.storyMap&&this.storyMarkers.length>0&&(this.storyMarkers.forEach((function(e){return t.storyMap.removeLayer(e)})),this.storyMarkers=[])}},{key:"showPage",value:function(t){this.pages.forEach((function(e){e.classList.toggle("hidden",e.id!==t)}))}},{key:"showMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("Showing message: ".concat(t,", isError: ").concat(e)),"undefined"==typeof Swal)return console.error("SweetAlert2 is not loaded. Falling back to alert."),void alert(t);try{Swal.fire({title:e?"Gagal!":"Sukses!",text:t,icon:e?"error":"success",confirmButtonColor:"#3B82F6",timer:e?void 0:2e3,showConfirmButton:e,background:"#2d3536",color:"#ffffff",iconColor:e?"#dc3545":"#4BB543",position:"top-end",toast:!e,timerProgressBar:!e})}catch(e){console.error("Error showing SweetAlert2 message:",e),alert(t)}}},{key:"resetStoryForm",value:function(){this.storyForm.reset(),this.photoPreview.classList.add("hidden"),this.photoPreview.src="",this.photoInput.value="",this.capturedImageData=null}},{key:"getPhotoFromInput",value:function(){return this.photoInput.files.length>0?this.photoInput.files[0]:null}},{key:"navigateTo",value:function(t){window.location.hash=t}},{key:"getCurrentHash",value:function(){return window.location.hash.slice(1)||"login"}},{key:"handlePageViewTransition",value:function(t,e){var r=this;document.startViewTransition?document.startViewTransition(o(a().mark((function n(){var i,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=document.querySelector(".page:not(.hidden)"),o=document.getElementById(t),!i){n.next=6;break}return i.style.animation="fadeOut 0.3s ease-out forwards",n.next=6,new Promise((function(t){return setTimeout(t,300)}));case 6:if(r.showPage(t),o&&(o.style.animation="fadeIn 0.5s ease-in forwards"),!e){n.next=11;break}return n.next=11,e();case 11:case"end":return n.stop()}}),n)})))):(this.showPage(t),e&&e())}},{key:"setupNotificationButton",value:function(t){var e=document.querySelector("#notification-button");e||((e=document.createElement("button")).id="notification-button",e.textContent="Aktifkan Notifikasi",e.className="btn-secondary",e.style.cssText="\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        z-index: 1000;\n        padding: 10px 15px;\n        background: #3B82F6;\n        color: white;\n        border: none;\n        border-radius: 5px;\n        cursor: pointer;\n      ",document.body.appendChild(e)),e.addEventListener("click",t)}},{key:"updateNotificationUI",value:function(t){var e=document.querySelector("#notification-button");e&&(t?(e.textContent="Notifikasi Aktif",e.style.background="#10B981",e.disabled=!0):(e.textContent="Aktifkan Notifikasi",e.style.background="#3B82F6",e.disabled=!1))}},{key:"_setupImageErrorHandling",value:function(){var t=this;document.addEventListener("error",(function(e){"img"===e.target.tagName.toLowerCase()&&t._handleImageError(e.target)}),!0)}},{key:"_handleImageError",value:function(t){if("preview"!==t.id&&(t.classList.add("error"),t.closest(".story-card"))){var e=t.parentElement;if(e.classList.contains("img-container")||((e=document.createElement("div")).className="img-container",t.parentNode.insertBefore(e,t),e.appendChild(t)),!e.querySelector(".img-error")){var r=document.createElement("div");r.className="img-error",r.innerHTML='<i class="fas fa-image"></i><br>Gambar tidak tersedia',e.appendChild(r)}}}},{key:"_setButtonLoading",value:function(t,e){t&&(e?(t.disabled=!0,t.classList.add("loading"),t.dataset.originalText||(t.dataset.originalText=t.innerHTML),t.innerHTML=""):(t.disabled=!1,t.classList.remove("loading"),t.dataset.originalText&&(t.innerHTML=t.dataset.originalText,delete t.dataset.originalText)))}},{key:"addStoryMarker",value:function(t){if(this.storyMap&&t.lat&&t.lon){var e=L.divIcon({html:'<div class="custom-marker"><i class="fas fa-map-marker-alt"></i></div>',className:"story-marker-icon",iconSize:[30,42],iconAnchor:[15,42],popupAnchor:[0,-42]}),r=L.marker([t.lat,t.lon],{icon:e}).addTo(this.storyMap);r.bindPopup('\n      <div class="marker-popup">\n        <h4>'.concat(t.name,"</h4>\n        <p>").concat(t.description.substring(0,100)).concat(t.description.length>100?"...":"",'</p>\n        <div class="popup-image">\n          <img src="').concat(t.photoUrl,'" alt="Foto cerita ').concat(t.name,'" style="max-width: 100%; max-height: 120px; object-fit: cover; border-radius: 4px;">\n        </div>\n        <p class="popup-date">Dibuat: ').concat(new Date(t.createdAt).toLocaleDateString("id-ID"),"</p>\n      </div>\n    "),{maxWidth:300,className:"story-popup"}),this.storyMarkers.push(r)}}}],e&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}()}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var i=r[t]={id:t,exports:{}};return e[t](i,i.exports,n),i.exports}n.m=e,t=[],n.O=(e,r,a,i)=>{if(!r){var o=1/0;for(l=0;l<t.length;l++){for(var[r,a,i]=t[l],s=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((t=>n.O[t](r[c])))?r.splice(c--,1):(s=!1,i<o&&(o=i));if(s){t.splice(l--,1);var u=a();void 0!==u&&(e=u)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[r,a,i]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={79:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var a,i,[o,s,c]=r,u=0;if(o.some((e=>0!==t[e]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var l=c(n)}for(e&&e(r);u<o.length;u++)i=o[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(l)},r=self.webpackChunkstory_sharing_app=self.webpackChunkstory_sharing_app||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),n.nc=void 0;var a=n.O(void 0,[528,377,755],(()=>n(429)));a=n.O(a)})();